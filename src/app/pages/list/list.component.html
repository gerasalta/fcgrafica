<div class="container mt-3">
  <div class="row border rounded p-3 mb-3">
    <div class="col d-flex">
      <input class="form-control" type="search" placeholder="Buscar" aria-label="Search">
      <button class="btn btn-dark">Search</button>
    </div>
  </div>
  <div class="row mb-3">
    <div class="col p-0">
      <table class="table m-0">
        <thead class="table-dark">
          <tr>
            <th scope="col">Nombre</th>
            <th scope="col">Apellido</th>
            <th scope="col">Company</th>
            <th scope="col">Material</th>
            <th scope="col">Total</th>
            <th scope="col">Anticipo</th>
            <th scope="col">Saldo</th>
            <th scope="col">Opciones</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let order of orders; let i = index">
            <tr>
              <td>{{order.clientData.name}}</td>
              <td>{{order.clientData.lastName}}</td>
              <td>{{order.clientData.company}}</td>
              <td>{{order.orderData.arrOrders[0].material}}</td>
              <td>$ {{order.balanceData.total}}</td>
              <td>$ {{order.balanceData.warranty}}</td>
              <td>$ {{order.balanceData.balance}}</td>
              <td><button class="btn" type="button" data-bs-toggle="modal" [attr.data-bs-target]="'#modal'+i"><i
                    class="fa-solid fa-circle-info"></i></button></td>
            </tr>
            <div class="modal fade" id="modal{{i}}" tabindex="-1" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered modal-xl">
                <div class="modal-content">
                  <div class="modal-header d-flex flex-column">
                    <h3 class="modal-title">{{order.clientData.company}} ({{order.clientData.name}}
                      {{order.clientData.lastName}})</h3>
                    <h5 class="modal-title text-secondary"><i class="fa-solid fa-phone"></i> {{order.clientData.phone}}
                      <i class="fa-solid fa-location-dot"></i> {{order.clientData.email}} <i
                        class="fa-solid fa-envelope"></i> {{order.clientData.address}}
                    </h5>
                  </div>
                  <div class="modal-body">
                    <table class="table">
                      <thead class="table-dark">
                        <tr>
                          <th>#</th>
                          <th>Material</th>
                          <th>Dimensiones</th>
                          <th>Servicio</th>
                          <th>Precio</th>
                          <th></th>
                          <th></th>
                        </tr>
                      </thead>
                      <tbody>
                        <ng-container *ngFor="let item of order.orderData.arrOrders, let position = index"
                          [ngSwitch]="item.material">
                          <tr *ngSwitchCase="'vinyl'">
                            <td>{{position+1}}</td>
                            <td>{{item.material}} {{item.plotter}} {{item.materialType}}</td>
                            <td>{{item.width}}x{{item.height}}</td>
                            <td>{{item.additionalService}}</td>
                            <td>{{item.partialAmount}}</td>
                            <td></td>
                            <td></td>
                          </tr>
                          <tr *ngSwitchCase="'banner'">
                            <td>{{position+1}}</td>
                            <td>{{item.material}} {{item.materialType}}</td>
                            <td>{{item.width}}x{{item.height}}</td>
                            <td>{{item.additionalMaterial}} {{item.additionalService}}</td>
                            <td>{{item.partialAmount}}</td>
                            <td></td>
                            <td></td>
                          </tr>
                          <tr *ngSwitchCase="'polyfan'">
                            <td>{{position+1}}</td>
                            <td>{{item.material}}</td>
                            <td>{{item.units}}</td>
                            <td>{{item.additionalMaterial}} {{item.additionalService}}</td>
                            <td>{{item.partialAmount}}</td>
                            <td></td>
                            <td></td>
                          </tr>
                          <tr *ngSwitchCase="'light'">
                            <td>{{position+1}}</td>
                            <td>{{item.material}} {{item.lightMaterial}} {{item.colours}}</td>
                            <td>{{item.meters}}</td>
                            <td>-</td>
                            <td>{{item.partialAmount}}</td>
                            <td></td>
                            <td></td>
                          </tr>
                        </ng-container>
                      </tbody>
                      <thead class="table bg-soft">
                        <tr>
                          <th></th>
                          <th>Fecha De Entrega</th>
                          <th>Descuento</th>
                          <th>Anticipo</th>
                          <th>Subtotal</th>
                          <th>Total</th>
                          <th>Saldo</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td></td>
                          <td> {{order.balanceData.date | date}}</td>
                          <td>% {{order.balanceData.discount}}</td>
                          <td>$ {{order.balanceData.warranty}}</td>
                          <td>$ {{order.balanceData.subTotal}}</td>
                          <td>$ {{order.balanceData.total}}</td>
                          <td>$ {{order.balanceData.balance}}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-success"><i class="fa-solid fa-check"></i></button>
                    <button type="button" class="btn btn-danger" data-bs-dismiss="modal" (click)="deleteOrder(i)"><i
                        class="fa-solid fa-trash-can"></i></button>
                  </div>
                </div>
              </div>
            </div>
          </ng-container>

        </tbody>
      </table>
    </div>
    <div *ngIf="spinner" class="row d-flex justify-content-center m-3">
      <div class="spinner-border text-dark" role="status">
        <span class="sr-only"></span>
      </div>
    </div>
    <nav class="row m-3" aria-label="...">
      <ul class="pagination justify-content-center">
        <button class="btn btn-soft mx-1"[disabled]="!prevPage" (click)="turnPage(-1)"><i class="fa-solid fa-caret-left"></i></button>
        <button class="btn btn-soft mx-1" [disabled]="!nextPage" (click)="turnPage(+1)"><i class="fa-solid fa-caret-right"></i></button>
      </ul>
    </nav>
  </div>